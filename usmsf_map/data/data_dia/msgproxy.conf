###################################################################################
# Main Configuration
###################################################################################

[UXCUTOR/COMMON]
HEARTBEAT_TIME = 10000
MAX_MQ_SIZE = 2048000
USE_MQ = ON
USE_FD = ON
MAX_MESSAGE_SIZE = 20480
MAX_THREAD = 1
MPOOL_MAX_FREE = 0 # Mega byte
QUEUE_PRINT_LWM = 100
LOG_FORMAT = 0x0000BE # 0x0400BE(default)
DEFAULT_LOG_FILE = log/msgproxy/msgproxy

[UXCUTOR/LIBRARY]
#libudbc.so
libUTIL.so
#libNQ.so
#libGCA.so

[UXCUTOR/ACTOR]
#actor kind; dll file; module_create_function; configuration_file(opt)
#LUA; libuact_lua.so; uxc_actlua_module_create;
#SQL; libuact_sql.so; uxc_actsql_module_create;

[UXCUTOR/PROTOCOL_ADAPTER]
# protocol_adapter_name; protocol adapter id; dll_file; padapter_create_function; configuration_file(opt)
#PA_DIAMETER; 2; libupa_dia.so; upa_dia_create;
PA_TCP; 0; libupa_tcp.so; upa_tcp_create;
PA_MMIF; 1; libupa_mmif.so; upa_mmif_create;
PA_DBIF; 3; libupa_dbif.so; upa_dbif_create;
#PA_UDP; 4; libupa_udp.so; upa_udp_create;
#PA_TCAP; 5; libupa_tcap.so; upa_tcap_create;

[UXCUTOR/PLUGIN]
# plugin-dll-file; DLL STATIC or DYNAMIC; plugin_create_function(opt); configuration_file(opt)
libmsgproxy.so ; DYNAMIC; smsfif_create ; $UASYS_HOME/data/msgproxy.conf


[UXCUTOR/SESSDB]
#CONF_FILE = $UASYS_HOME/data/session.xml
#SESSDB_DLL = libusdb_dbms.so
#SESSDB_CREATOR = usdb_dbms_create

[UXCUTOR/SERVICE]
#HOST_ID = 1
#UPDATE_SESSMETA = OFF
#MAX_SESSION_PER_THREAD = 20000
#INDEX_BIN_SIZE = 16381
#BACKUP_DIR = $UASYS_HOME/data/svcmeta

[UXCUTOR/SERVICE/UXCRIPT]
# file or directory

[UXCUTOR/STATISTICS]
#CONF_FILE = $UASYS_HOME/data/stat_diain.xml

[UXCUTOR/CDR]
#CONF_FILE = $UASYS_HOME/data/uxcutor.conf

[UXCUTOR/TRACE]
ALLKEY = *
MAX_TRACE = 5
MAX_ALLKEY_TRACE = 0
PART_MATCH = OFF
TYPE = 0 # 0: OAM, 1: FILE,  other nubmer : extenstion
HEADER_FORMAT = */%s/* # OAM trace header format
FILE_FORMAT = $UASYS_HOME/log/TRACE/%f/trace-%K.%Y%m%d # trace file format

[UXCUTOR/ACTION]
# action_name; from; to; kind; function_name; file_name(opt); flags(opt)
# flags : 0x01(PUSH_ALL_THREAD)
#dis-xcutor; 20100603000000; 20121231235959; SYS; uxc_sysmmc_display
#chg-xcutor; 20100603000000; 20121231235959; SYS; uxc_sysmmc_change
#reload-xcutor; 20100603000000; 20121231235959; SYS; uxc_sysmmc_reload
#dis-xcutor-trc; 20100603000000; 20121231235959; SYS; uxc_sysmmc_dis_trc
#dis-xcutor-trc-total; 20100603000000; 20121231235959; SYS; uxc_sysmmc_dis_total_trc
#add-xcutor-trc; 20100603000000; 20121231235959; SYS; uxc_sysmmc_add_trc
#del-xcutor-trc; 20100603000000; 20121231235959; SYS; uxc_sysmmc_del_trc
# BEP->FEP
tcp_actor ; 20140101000000; 21001231235959; DLL; handle_smsf_msg; libmsgproxy.so
# FEP->BEP
smsf_actor ; 20140101000000; 21001231235959; DLL; handle_recv_interface_msg; libmsgproxy.so

#reload-diain; 20140603000000; 21001231235959; DLL; handle_mmc_reload_diain; libdiain.so

###################################################################################
# Actors Configuration
###################################################################################

[UXCUTOR/SQL/DB_CONNECTOR]
# UDBC DB Connection Manager Driver Configuration : lib=libuact_sql, class=uxc_dbcmgr_t
# driver dll; driver configurations
#libudbc_mysql.so; user=root; password=root.123; dbname=smscoam; port=3306; host=172.10.9.21; connect_time=5; timeout=5; wtimeout=5; use_recover=on

[UXCUTOR/LUA/SCRIPT]
# file or directory
#$UASYS_HOME/service/TJ/normal_voice.xcpt

###################################################################################
# Protocol Adapters Configuration
###################################################################################

[UXCUTOR/PA_DIAMETER/COMMON]
# DIAMETER protocol adapter common configuration : lib=libupa_dia, class=upa_dia_t
#action_name = skt_handle_diamsg
#action_name = handle_dia
#action_name = diain_actor
#udia_conf = data/udia_conf.xml
#reconnect_time = 1  # seconds
#sock_buf_size = 2048000

[UXCUTOR/PA_DIAMETER/CHANNEL]
# DIAMETER protocol adapter channel configuration : lib=libupa_dia, class=upa_dia_t
# chnl_name; mode; pri_ip; sec_ip; port;
#DIAIN_CHNL; 0; ; SERVER; 10.20.20.1; ; 30005    # ADIF STACK

#[UXCUTOR/PA_TCP/COMMON]
# TCP protocol adapter channel configuration : lib=libupa_tcp, class=upa_tcp_t
#thread_count = 4 # thread count

[UXCUTOR/PA_TCP/CHANNEL]
# channel_name; action_name; mode; pri_ip; sec_ip; port; reconnect_time
#tcp_chnl1; cli_test; CLIENT; 127.0.0.1; ; 2222; 10 ;
smsfif_chnl1; 0; tcp_actor; SERVER; 127.0.0.1; ; 8000; ; 10 ;  # DIAMETER
#smsfif_chnl1; 0; tcp_actor; SERVER; ; ; 8000; ; 10 ;  # DIAMETER
#fepproxy_chnl2; 1; tcp_actor; SERVER; 192.168.5.18; ; 3000; ; 10 ;  # SMPP
#fepproxy_chnl3; 2; tcp_actor; SERVER; 192.168.5.18; ; 4000; ; 10 ;  # SIGTRAN

[UXCUTOR/PA_TCP/PROTOCOL]
# channel_name; is_text; exclude; endian; len_type; len_size; len_idx; hdr_size; sock_buf_size
# Big Endian(sun) : 0, Little Endian(linux, intel) : 1
# Integer Type : 0, String Type : 1
#tcp_chnl1 ; 0; 0; 1; 0; 4; 0; 4;
smsfif_chnl1 ; 0; 0; 1; 0; 4; 0; 4; 20480000
#fepproxy_chnl2 ; 0; 1; 1; 0; 4; 0; 8; 20480000
#fepproxy_chnl3 ; 0; 1; 1; 0; 4; 0; 8; 20480000

#[UXCUTOR/PA_TCP/STAT]
#CHNLSTAT_SHMKEY = 0x7770 # 이름이면 sys.conf에서 가져옴

[UXCUTOR/PA_UDP/CHANNEL]
# channel_name; action_name; mode; pri_ip; port; reconnect_time; use_connection
#udp_chnl1; cli_test; CLIENT; 127.0.0.1; 2223; 10 ;

[UXCUTOR/PA_UDP/PROTOCOL]
# channel_name; is_text; exclude; endian; len_type; len_size; len_idx; hdr_size; sock_buf_size
# Big Endian(sun) : 0, Little Endian(linux, intel) : 1
# Integer Type : 0, String Type : 1
#udp_chnl1 ; 0; 0; 1; 0; 4; 0; 4;

[UXCUTOR/PA_MMIF/COMMON]
# MMIF protocol adapter common configuration : lib=libupa_mmif, class=upa_mmif_t

[UXCUTOR/PA_DBIF/COMMON]
# DBIF protocol adapter common configuration : lib=libupa_dbif, class=upa_dbif_t
MTYPE = 100, 101
action_name = smsf_actor # action name
recv_timeout = 70000    # recv timeout unit-msec
# MTYPE = 10
#action_name = uxcpt_handle_dbif

#[UXCUTOR/PA_DBIF/ACTION] #deprecated
# DBIF PA msgid, action pair configuration : lib=libupa_dbif, class=upa_dbif_t
# message ID = action_name
# Notice : Don't use msg id from 0 to 3 because the values are reserved in sql msg ID
#100 = uxcpt_handle_dbif
#101 = test_dbif
#300 = testlua_sess
#400 = testlua_udbc

[UXCUTOR/PA_DBIF/OPDATA]
# opcode; action; name; timeout(msec); service; subsid indexes
#102; ; ACR; 3000; cap2ro; ;

###################################################################################
# PA_TCAP Configuration
###################################################################################

[UXCUTOR/PA_TCAP/COMMON]
#tcapif_name = fepproxy
#reconnect_time = 5  # seconds
#sock_buf_size = 2048000
#thread_count = 10
#log_level = 0x41 # 0x41(default)
#src_addr = 12920011040b2618016478f0

[UXCUTOR/PA_TCAP/CHANNEL_TYPE]
# id; type; creator; dll
#0; TCP; upa_tcaptcpchnl_create
#1; TCAP; upa_tcaputcapchnl_create; libupa_utcapchnl.so

[UXCUTOR/PA_TCAP/CHANNEL]
# PA_TCAP channel configuration
# chnl_id; type; chnl_name; mode;  pri_ip; sec_ip; port; maxpeer(opt)
#2; TCAP; FEP_PROXY; ; ; ; ;

[UXCUTOR/PA_TCAP/LOCAL_SSN]
# SSN = handle action
#0xB ; MAP3 ; uxcpt_handle_tcap

[UXCUTOR/PA_TCAP/OPDATA]
# protocol ; opcode ; pdunum ; name ; optimer ; opclass ; acnidx ;
#MAP3 ; 0x0 ; ; mof; ; ; ;
#MAP3 ; 0x0 ; ; sri; ; ; ;
#MAP3 ; 0x0 ; ; mtf; ; ; ;

[UXCUTOR/PA_TCAP/ACNINFO]
# id ; name ; ACN value (hexstr)
#123 ; test acn; 0012349930;

###################################################################################
# SERVICE SELECTOR Configuration
###################################################################################

[UXCUTOR/SERVICE_SELECTOR]
# Id; Name; PA Name; App-Id; Library Name; Creater
#0; CAP; PA_TCAP; 0; libuxcss_cap.so; uxcss_cap_create;
#1; DIA; PA_DIA; 0; libuxcss_dia.so; uxcss_dia_create;
#2; DBIF; PA_DBIF; 0; libuxcss_dbif.so; uxcss_dbif_create;
#0; MAP; PA_TCAP; 1; libusvcsel.so; uxc_capsvcsel_create;
#0; WIN; PA_TCAP; 2; libusvcsel.so; uxc_capsvcsel_create;
#0; SIP; PA_SIP; 2; libusvcsel.so; uxc_capsvcsel_create;

[UXCUTOR/SERVICE_SELECTOR/CAP/SAC]
# Service Name; SAC; SAC Only Flag; Operation; Language; Remove Flag;
#Sac1; 888; 1; 0x0; BAHASA; 0;
#Sac2; 889; 1; 0x0; BAHASA; 0;
#Sac3; 810; 1; 0x0; BAHASA; 0;

[UXCUTOR/SERVICE_SELECTOR/CAP/KEY]
# Service Name; Operation(Mandatory); ServiceKey; Calling; Called;
#Key1; 0x1; 100; 0102950; ;
#Key2; 0x1; 110; ; 0109052;
#test; 0x0; 100; ; ;
#pps; 0x0; 100; ; ;
#sb; 0x0; 100; ; ;

[UXCUTOR/SERVICE_SELECTOR/MAP/META]
# message field name; data type; map kind
#tcap.protocol; enum(CAP3,WIN,INAP,CAP2,MAP3,WIN2,GMAP,SKWIN,KTFWIN); hash; # cap/cap3/map3
#comp.opcode; enum(SendRoutingInfoSM=45,ReportDeliveryStatusSM=47); hash; # idp, idpsms

[UXCUTOR/SERVICE_SELECTOR/MAP/RULE]
#serivce-name; tcap.protocol; comp.opcode
#HLRSIM ; MAP3 ; SendRoutingInfoSM
#HLRSIM ; MAP3 ; ReportDeliveryStatusSM
#HLRSIM ; ;
#MSCSIM ; ;

[UXCUTOR/SERVICE_SELECTOR/DIA/APPID]
# Service Name; Application-Id;
#cap2ro; 0;

###################################################################################
# Plugin Configuration
###################################################################################
#[UXCUTOR/PLUGIN/IPCTX/COMMON]
#MTYPE_SIZE = 8
#SEND_TIMEOUT = 0
#
#[UXCUTOR/PLUGIN/IPCTX/CHANNEL]
## channel name; MKIND(DBIF or MMIF); MTYPE-SIZE(optional - empty시 COMMON의 MTYPE_SIZE사용)
#dbifchnl; DBIF; 8
#
#[UXCUTOR/LCCF/COMMON]
#DBC_INDEX          = 0
#REIF_INIT_UDIA     = NO
#
#[UXCUTOR/XCRIPT/DIA]
#REPLACE_GET_THRID  = 1
#
#[UXCUTOR/XCRIPT/DBIF]
#SESSION_IDX_NAME   = DBIF
#

[MSGPROXY_COMMON]
# MODE = 0 for SIGTRAN, MODE = 1 for Diameter
MODE = 1

