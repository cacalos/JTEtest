#
SubDir TOP diameter diaib ;

SubDirHdrs $(TOP)/inc $(UALIB_SRC_HOME)/include ;
SubDirHdrs $(UXLIB_SRC_HOME)/include ;
SubDirHdrs $(UDIA_SRC_HOME)/include ;
SubDirHdrs $(UXCUTOR_SRC_HOME)/include ;
SubDirHdrs $(TOP)/diameter/diacommon ;
SubDirHdrs $(UDIA3_STACK_HOME)/local ;

TARGET = diaib ;
LIB_NAME = lib$(TARGET) ;
LOCAL_DEFINES = -D_MODULE_NAME='\"$(TARGET)\"' -D_GNU_SOURCE -D_PSTAT64 ;
LOCAL_CCFLAGS = ;

LIB_SRCS =
    diaib
	handle_msg
	handle_ofr_req_msg
	handle_ofr_resp_msg
	handle_tfr_req_msg
	handle_tfr_resp_msg
	handle_error
	diaib_avp_util
	dia_resp_ofr
	dia_resp_tfr
	diaib_config
	diaib_trace
	stat
    ;



ObjectCcFlags $(LIB_SRCS)$(SUFOBJ) : $(LOCAL_DEFINES) $(SYS_CCFLAGS) $(SYS_SHAREDCCFLAGS) ;


Library $(LIB_NAME)$(SUFLIB) : $(LIB_SRCS).c ;

SharedLibraryMain $(LIB_NAME)$(SUFSHARED) : $(LIB_NAME)$(SUFLIB) ;

#LINKLIBS on $(TARGET) = -ldiacommon ;
#   -lsigtran_util -lss7 -lsys_lib -lua_common -lTPDU $(OSS_LIBS) -L$(USRG_ROOT)/lib -lutcap -lulib
#   -L/usr/local/lib -lm -ldl ;

InstallLib $(UASYS_HOME)/lib : $(LIB_NAME)$(SUFSHARED) ;

SYS_LINT = clang --analyze --analyzer-output text ;
#LINTFLAGS = --xml ;
Lint check : $(LIB_SRCS).c ;
SYS_LINT = cppcheck --enable=warning --enable=performance --enable=portability ;
Lint check : $(LIB_SRCS).c ;
